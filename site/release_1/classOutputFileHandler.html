<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Chaste: OutputFileHandler Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>OutputFileHandler Class Reference</h1><!-- doxytag: class="OutputFileHandler" --><code>#include &lt;<a class="el" href="OutputFileHandler_8hpp-source.html">OutputFileHandler.hpp</a>&gt;</code>
<p>
<div class="dynheader">
Collaboration diagram for OutputFileHandler:</div>
<div class="dynsection">
<p><center><img src="classOutputFileHandler__coll__graph.png" border="0" usemap="#OutputFileHandler__coll__map" alt="Collaboration graph"></center>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="classOutputFileHandler-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputFileHandler.html#743b18da5860e26d5abadb629917efcf">OutputFileHandler</a> (const std::string &amp;rDirectory, bool rCleanOutputDirectory=true)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputFileHandler.html#81caf1818db3b80edef83244d39624ba">GetOutputDirectoryFullPath</a> (std::string directory)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputFileHandler.html#e85d34d7b0ab4ac1e8f8352ea5f2af83">GetOutputDirectoryFullPath</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">out_stream&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputFileHandler.html#8065de4d0a105bdf3940cbe8c6ecdb69">OpenOutputFile</a> (std::string fileName, std::ios_base::openmode mode=std::ios::out|std::ios::trunc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">out_stream&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputFileHandler.html#6bb3f674fd1b9ad34bde5cb50f2c6cbc">OpenOutputFile</a> (std::string fileName, unsigned number, std::string fileFormat, std::ios_base::openmode mode=std::ios::out|std::ios::trunc)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputFileHandler.html#af6d038fd345312ce50334bc917aeca5">IsMaster</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputFileHandler.html#0f5e0618de55107606ee23a5d60c0b41">GetChasteTestOutputDirectory</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a7e4862b45df8d48f55881a71b63b85e"></a><!-- doxytag: member="OutputFileHandler::mDirectory" ref="a7e4862b45df8d48f55881a71b63b85e" args="" -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputFileHandler.html#a7e4862b45df8d48f55881a71b63b85e">mDirectory</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The directory to store output files in. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="110ece590ba25797a8239e4102a3c4a1"></a><!-- doxytag: member="OutputFileHandler::mAmMaster" ref="110ece590ba25797a8239e4102a3c4a1" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classOutputFileHandler.html#110ece590ba25797a8239e4102a3c4a1">mAmMaster</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Are we the master process? <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file abstracts stuff that needs to be done when creating output files for tests. It defines some helpful functions, so that things that are otherwise repeated in lots of places are just done here. 
<p>Definition at line <a class="el" href="OutputFileHandler_8hpp-source.html#l00046">46</a> of file <a class="el" href="OutputFileHandler_8hpp-source.html">OutputFileHandler.hpp</a>.</p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="743b18da5860e26d5abadb629917efcf"></a><!-- doxytag: member="OutputFileHandler::OutputFileHandler" ref="743b18da5860e26d5abadb629917efcf" args="(const std::string &amp;rDirectory, bool rCleanOutputDirectory=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OutputFileHandler::OutputFileHandler           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>rDirectory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>rCleanOutputDirectory</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create an <a class="el" href="classOutputFileHandler.html">OutputFileHandler</a> that will create output files in the given directory. The directory name should be relative to the place where Chaste test output is stored. If the user needs to know where this is, use the GetChasteTestOutputDirectory method.<p>
Will check that the directory exists and create it if needed.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rDirectory</em>&nbsp;</td><td>the directory to put output files in. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rCleanOutputDirectory</em>&nbsp;</td><td>whether to remove any existing files in the output directory </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="OutputFileHandler_8cpp-source.html#l00041">41</a> of file <a class="el" href="OutputFileHandler_8cpp-source.html">OutputFileHandler.cpp</a>.</p>

<p>References <a class="el" href="PetscTools_8cpp-source.html#l00097">PetscTools::AmMaster()</a>, <a class="el" href="OutputFileHandler_8cpp-source.html#l00105">GetOutputDirectoryFullPath()</a>, <a class="el" href="OutputFileHandler_8hpp-source.html#l00050">mAmMaster</a>, and <a class="el" href="OutputFileHandler_8hpp-source.html#l00049">mDirectory</a>.</p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="0f5e0618de55107606ee23a5d60c0b41"></a><!-- doxytag: member="OutputFileHandler::GetChasteTestOutputDirectory" ref="0f5e0618de55107606ee23a5d60c0b41" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string OutputFileHandler::GetChasteTestOutputDirectory           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Static method for getting the test output directory (the directory where chaste stores test out, which is the environment variable CHASTE_TESTOUTPUT<p>
Static so an output file handler does not have to be created if the test output directory is wanted for, say, reading a file 
<p>Definition at line <a class="el" href="OutputFileHandler_8cpp-source.html#l00063">63</a> of file <a class="el" href="OutputFileHandler_8cpp-source.html">OutputFileHandler.cpp</a>.</p>

<p>Referenced by <a class="el" href="TissueSimulationArchiver_8hpp-source.html#l00101">TissueSimulationArchiver&lt; DIM, SIM &gt;::GetArchivePathname()</a>, and <a class="el" href="OutputFileHandler_8cpp-source.html#l00086">GetOutputDirectoryFullPath()</a>.</p>

</div>
</div><p>
<a class="anchor" name="81caf1818db3b80edef83244d39624ba"></a><!-- doxytag: member="OutputFileHandler::GetOutputDirectoryFullPath" ref="81caf1818db3b80edef83244d39624ba" args="(std::string directory)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string OutputFileHandler::GetOutputDirectoryFullPath           </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>directory</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check that the desired output directory exists and is writable by us. Create it if needed. Return the full pathname of the output directory.<p>
The environment variable CHASTE_TEST_OUTPUT will be examined. If it is set and non-empty it is taken to be a directory where test output should be stored. Otherwise the current directory is used.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>directory</em>&nbsp;</td><td>pathname of the output directory, relative to where Chaste output will be stored (user shouldn't care about this). </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>full pathname to the output directory </dd></dl>

<p>Definition at line <a class="el" href="OutputFileHandler_8cpp-source.html#l00086">86</a> of file <a class="el" href="OutputFileHandler_8cpp-source.html">OutputFileHandler.cpp</a>.</p>

<p>References <a class="el" href="OutputFileHandler_8cpp-source.html#l00063">GetChasteTestOutputDirectory()</a>, and <a class="el" href="OutputFileHandler_8hpp-source.html#l00050">mAmMaster</a>.</p>

<p>Referenced by <a class="el" href="AbstractConvergenceTester_8hpp-source.html#l00188">AbstractConvergenceTester&lt; CELL, CARDIAC_PROBLEM, DIM, PROBLEM_DIM &gt;::Converge()</a>, <a class="el" href="HoneycombMeshGenerator_8cpp-source.html#l00032">HoneycombMeshGenerator::HoneycombMeshGenerator()</a>, and <a class="el" href="TissueSimulationArchiver_8hpp-source.html#l00155">TissueSimulationArchiver&lt; DIM, SIM &gt;::Save()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e85d34d7b0ab4ac1e8f8352ea5f2af83"></a><!-- doxytag: member="OutputFileHandler::GetOutputDirectoryFullPath" ref="e85d34d7b0ab4ac1e8f8352ea5f2af83" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string OutputFileHandler::GetOutputDirectoryFullPath           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the full pathname to the directory this object will create files in. 
<p>Definition at line <a class="el" href="OutputFileHandler_8cpp-source.html#l00105">105</a> of file <a class="el" href="OutputFileHandler_8cpp-source.html">OutputFileHandler.cpp</a>.</p>

<p>References <a class="el" href="OutputFileHandler_8hpp-source.html#l00049">mDirectory</a>.</p>

<p>Referenced by <a class="el" href="OutputFileHandler_8cpp-source.html#l00041">OutputFileHandler()</a>.</p>

</div>
</div><p>
<a class="anchor" name="8065de4d0a105bdf3940cbe8c6ecdb69"></a><!-- doxytag: member="OutputFileHandler::OpenOutputFile" ref="8065de4d0a105bdf3940cbe8c6ecdb69" args="(std::string fileName, std::ios_base::openmode mode=std::ios::out|std::ios::trunc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">out_stream OutputFileHandler::OpenOutputFile           </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ios_base::openmode&nbsp;</td>
          <td class="paramname"> <em>mode</em> = <code>std::ios::out&nbsp;|&nbsp;std::ios::trunc</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Open an output file in our directory, and check it was opened successfully. Throws an <a class="el" href="classException.html">Exception</a> if not.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>the name of the file to open, relative to the output directory. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>optionally, flags to use when opening the file (defaults are as for std::ofstream). </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a managed pointer to the opened file stream. </dd></dl>

<p>Definition at line <a class="el" href="OutputFileHandler_8cpp-source.html#l00111">111</a> of file <a class="el" href="OutputFileHandler_8cpp-source.html">OutputFileHandler.cpp</a>.</p>

<p>References <a class="el" href="OutputFileHandler_8hpp-source.html#l00049">mDirectory</a>.</p>

<p>Referenced by <a class="el" href="AbstractConvergenceTester_8hpp-source.html#l00188">AbstractConvergenceTester&lt; CELL, CARDIAC_PROBLEM, DIM, PROBLEM_DIM &gt;::Converge()</a>, <a class="el" href="MeshBasedTissue_8cpp-source.html#l00409">MeshBasedTissue&lt; DIM &gt;::CreateOutputFiles()</a>, <a class="el" href="AbstractTissue_8cpp-source.html#l00189">AbstractTissue&lt; DIM &gt;::CreateOutputFiles()</a>, <a class="el" href="CardiacElectroMechanicsProblem_8cpp-source.html#l00053">CardiacElectroMechanicsProblem&lt; DIM &gt;::DetermineWatchedNodes()</a>, <a class="el" href="Hdf5ToMeshalyzerConverter_8cpp-source.html#l00088">Hdf5ToMeshalyzerConverter::Hdf5ToMeshalyzerConverter()</a>, <a class="el" href="HoneycombMeshGenerator_8cpp-source.html#l00160">HoneycombMeshGenerator::Make2dPeriodicCryptMesh()</a>, <a class="el" href="OutputFileHandler_8cpp-source.html#l00123">OpenOutputFile()</a>, <a class="el" href="ProgressReporter_8hpp-source.html#l00061">ProgressReporter::ProgressReporter()</a>, <a class="el" href="LogFile_8cpp-source.html#l00067">LogFile::Set()</a>, <a class="el" href="CryptSimulation2d_8cpp-source.html#l00097">CryptSimulation2d::SetupWriteBetaCatenin()</a>, <a class="el" href="SimpleDataWriter_8hpp-source.html#l00060">SimpleDataWriter::SimpleDataWriter()</a>, <a class="el" href="TissueSimulation_8cpp-source.html#l00403">TissueSimulation&lt; DIM &gt;::Solve()</a>, and <a class="el" href="Hdf5ToMeshalyzerConverter_8cpp-source.html#l00041">Hdf5ToMeshalyzerConverter::Write()</a>.</p>

</div>
</div><p>
<a class="anchor" name="6bb3f674fd1b9ad34bde5cb50f2c6cbc"></a><!-- doxytag: member="OutputFileHandler::OpenOutputFile" ref="6bb3f674fd1b9ad34bde5cb50f2c6cbc" args="(std::string fileName, unsigned number, std::string fileFormat, std::ios_base::openmode mode=std::ios::out|std::ios::trunc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">out_stream OutputFileHandler::OpenOutputFile           </td>
          <td>(</td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>fileFormat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ios_base::openmode&nbsp;</td>
          <td class="paramname"> <em>mode</em> = <code>std::ios::out&nbsp;|&nbsp;std::ios::trunc</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This just calls the other OpenOutputFile after concatenating the first three arguments together to make the full filename. For example OpenOutputFile("results_", 3, ".dat") creates results_3.dat. See documentation for <a class="el" href="classOutputFileHandler.html#8065de4d0a105bdf3940cbe8c6ecdb69">OpenOutputFile(std::string, std::ios_base::openmode)</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>the root name of the file to open </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>number</em>&nbsp;</td><td>the number to append to the root name of the file </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fileFormat</em>&nbsp;</td><td>the file format </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>optionally, flags to use when opening the file (defaults are as for std::ofstream). </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="OutputFileHandler_8cpp-source.html#l00123">123</a> of file <a class="el" href="OutputFileHandler_8cpp-source.html">OutputFileHandler.cpp</a>.</p>

<p>References <a class="el" href="OutputFileHandler_8cpp-source.html#l00111">OpenOutputFile()</a>.</p>

</div>
</div><p>
<a class="anchor" name="af6d038fd345312ce50334bc917aeca5"></a><!-- doxytag: member="OutputFileHandler::IsMaster" ref="af6d038fd345312ce50334bc917aeca5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool OutputFileHandler::IsMaster           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns true if this process is the master, or if running without Petsc i.e. in serial 
<p>Definition at line <a class="el" href="OutputFileHandler_8cpp-source.html#l00133">133</a> of file <a class="el" href="OutputFileHandler_8cpp-source.html">OutputFileHandler.cpp</a>.</p>

<p>References <a class="el" href="OutputFileHandler_8hpp-source.html#l00050">mAmMaster</a>.</p>

<p>Referenced by <a class="el" href="AbstractConvergenceTester_8hpp-source.html#l00188">AbstractConvergenceTester&lt; CELL, CARDIAC_PROBLEM, DIM, PROBLEM_DIM &gt;::Converge()</a>, and <a class="el" href="HoneycombMeshGenerator_8cpp-source.html#l00160">HoneycombMeshGenerator::Make2dPeriodicCryptMesh()</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>/tmp/release_1/global/src/<a class="el" href="OutputFileHandler_8hpp-source.html">OutputFileHandler.hpp</a><li>/tmp/release_1/global/src/<a class="el" href="OutputFileHandler_8cpp-source.html">OutputFileHandler.cpp</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Mar 18 12:52:46 2009 for Chaste by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
