<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Chaste: CardiacSimulationArchiver&lt; PROBLEM_CLASS &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Chaste&#160;<span id="projectnumber">Release::3.1</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classCardiacSimulationArchiver.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">CardiacSimulationArchiver&lt; PROBLEM_CLASS &gt; Class Template Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="CardiacSimulationArchiver" -->
<p><code>#include &lt;<a class="el" href="CardiacSimulationArchiver_8hpp_source.html">CardiacSimulationArchiver.hpp</a>&gt;</code></p>

<p><a href="classCardiacSimulationArchiver-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCardiacSimulationArchiver.html#ac3bd87c70c4034ae36f554faa0fd4fad">Save</a> (PROBLEM_CLASS &amp;rSimulationToArchive, const std::string &amp;rDirectory, <a class="el" href="classbool.html">bool</a> clearDirectory=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static PROBLEM_CLASS *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCardiacSimulationArchiver.html#a31ca0240091870257e172dab38fa8b7b">Load</a> (const std::string &amp;rDirectory)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static PROBLEM_CLASS *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCardiacSimulationArchiver.html#a0c3cd0de7b3d15b0c36256718ddfa283">Load</a> (const <a class="el" href="classFileFinder.html">FileFinder</a> &amp;rDirectory)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static PROBLEM_CLASS *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCardiacSimulationArchiver.html#a1b304bbf44b2adf6e99c429257911d49">Migrate</a> (const <a class="el" href="classFileFinder.html">FileFinder</a> &amp;rDirectory)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><h3>template&lt;class PROBLEM_CLASS&gt;<br/>
class CardiacSimulationArchiver&lt; PROBLEM_CLASS &gt;</h3>

<p><a class="el" href="classCardiacSimulationArchiver.html">CardiacSimulationArchiver</a> is a helper class for checkpointing of cardiac simulations.</p>
<p>The class is templated over the class defining the simulation (e.g. <a class="el" href="classMonodomainProblem.html">MonodomainProblem</a>). It would be more natural to template over dimensions as for other classes, and just deal with pointers to <a class="el" href="classAbstractCardiacProblem.html">AbstractCardiacProblem</a>. However, this breaks archive backwards compatibility... </p>

<p>Definition at line <a class="el" href="CardiacSimulationArchiver_8hpp_source.html#l00052">52</a> of file <a class="el" href="CardiacSimulationArchiver_8hpp_source.html">CardiacSimulationArchiver.hpp</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a31ca0240091870257e172dab38fa8b7b"></a><!-- doxytag: member="CardiacSimulationArchiver::Load" ref="a31ca0240091870257e172dab38fa8b7b" args="(const std::string &amp;rDirectory)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class PROBLEM_CLASS &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">PROBLEM_CLASS * <a class="el" href="classCardiacSimulationArchiver.html">CardiacSimulationArchiver</a>&lt; PROBLEM_CLASS &gt;::Load </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>rDirectory</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Unarchives a simulation from the directory specified.</p>
<p>Does a migrate if necessary (this is actually just a wrapper around the Migrate method now).</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Must be called collectively, i.e. by all processes.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">rDirectory</td><td>directory where the multiple files defining the checkpoint are located (relative to CHASTE_TEST_OUTPUT) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CardiacSimulationArchiver_8cpp_source.html#l00122">122</a> of file <a class="el" href="CardiacSimulationArchiver_8cpp_source.html">CardiacSimulationArchiver.cpp</a>.</p>

<p>References <a class="el" href="FileFinder_8hpp_source.html#l00056">RelativeTo::ChasteTestOutput</a>, and <a class="el" href="CardiacSimulationArchiver_8cpp_source.html#l00136">CardiacSimulationArchiver&lt; PROBLEM_CLASS &gt;::Migrate()</a>.</p>

</div>
</div>
<a class="anchor" id="a0c3cd0de7b3d15b0c36256718ddfa283"></a><!-- doxytag: member="CardiacSimulationArchiver::Load" ref="a0c3cd0de7b3d15b0c36256718ddfa283" args="(const FileFinder &amp;rDirectory)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class PROBLEM_CLASS &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">PROBLEM_CLASS * <a class="el" href="classCardiacSimulationArchiver.html">CardiacSimulationArchiver</a>&lt; PROBLEM_CLASS &gt;::Load </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFileFinder.html">FileFinder</a> &amp;&#160;</td>
          <td class="paramname"><em>rDirectory</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Unarchives a simulation from the directory specified.</p>
<p>Does a migrate if necessary (this is actually just a wrapper around the Migrate method now).</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Must be called collectively, i.e. by all processes.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">rDirectory</td><td>directory where the multiple files defining the checkpoint are located </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CardiacSimulationArchiver_8cpp_source.html#l00129">129</a> of file <a class="el" href="CardiacSimulationArchiver_8cpp_source.html">CardiacSimulationArchiver.cpp</a>.</p>

<p>References <a class="el" href="CardiacSimulationArchiver_8cpp_source.html#l00136">CardiacSimulationArchiver&lt; PROBLEM_CLASS &gt;::Migrate()</a>.</p>

</div>
</div>
<a class="anchor" id="a1b304bbf44b2adf6e99c429257911d49"></a><!-- doxytag: member="CardiacSimulationArchiver::Migrate" ref="a1b304bbf44b2adf6e99c429257911d49" args="(const FileFinder &amp;rDirectory)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class PROBLEM_CLASS &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">PROBLEM_CLASS * <a class="el" href="classCardiacSimulationArchiver.html">CardiacSimulationArchiver</a>&lt; PROBLEM_CLASS &gt;::Migrate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFileFinder.html">FileFinder</a> &amp;&#160;</td>
          <td class="paramname"><em>rDirectory</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Load a simulation, saved by any number of processes, into the correct number of processes for those currently launched.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Must be called collectively, i.e. by all processes.</dd></dl>
<p>Uses the <a class="el" href="classDistributedVectorFactory.html">DistributedVectorFactory</a> saved in the process 0 archive to work out how many secondary archive files to read, and loads the cells and boundary conditions from these too.</p>
<p>Uses a dumb partition to work out how to distribute the mesh and cells over the processes. If we are loading on the same number of processes as the simulation was saved on, it uses exactly the same distribution as before.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">rDirectory</td><td>directory where the multiple files defining the checkpoint are located </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="CardiacSimulationArchiver_8cpp_source.html#l00136">136</a> of file <a class="el" href="CardiacSimulationArchiver_8cpp_source.html">CardiacSimulationArchiver.cpp</a>.</p>

<p>References <a class="el" href="Exception_8hpp_source.html#l00143">EXCEPTION</a>, <a class="el" href="FileFinder_8cpp_source.html#l00152">FileFinder::Exists()</a>, <a class="el" href="FileFinder_8cpp_source.html#l00193">FileFinder::GetAbsolutePath()</a>, <a class="el" href="ArchiveOpener_8hpp_source.html#l00098">ArchiveOpener&lt; Archive, Stream &gt;::GetCommonArchive()</a>, <a class="el" href="PetscTools_8cpp_source.html#l00099">PetscTools::GetMyRank()</a>, <a class="el" href="DistributedVectorFactory_8hpp_source.html#l00224">DistributedVectorFactory::GetNumProcs()</a>, <a class="el" href="PetscTools_8cpp_source.html#l00093">PetscTools::GetNumProcs()</a>, <a class="el" href="DistributedVectorFactory_8hpp_source.html#l00255">DistributedVectorFactory::GetOriginalFactory()</a>, <a class="el" href="ArchiveLocationInfo_8cpp_source.html#l00092">ArchiveLocationInfo::GetProcessUniqueFilePath()</a>, <a class="el" href="FileFinder_8cpp_source.html#l00162">FileFinder::IsDir()</a>, and <a class="el" href="DistributedVectorFactory_8hpp_source.html#l00235">DistributedVectorFactory::SetCheckNumberOfProcessesOnLoad()</a>.</p>

<p>Referenced by <a class="el" href="CardiacSimulationArchiver_8cpp_source.html#l00122">CardiacSimulationArchiver&lt; PROBLEM_CLASS &gt;::Load()</a>.</p>

</div>
</div>
<a class="anchor" id="ac3bd87c70c4034ae36f554faa0fd4fad"></a><!-- doxytag: member="CardiacSimulationArchiver::Save" ref="ac3bd87c70c4034ae36f554faa0fd4fad" args="(PROBLEM_CLASS &amp;rSimulationToArchive, const std::string &amp;rDirectory, bool clearDirectory=true)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class PROBLEM_CLASS &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classCardiacSimulationArchiver.html">CardiacSimulationArchiver</a>&lt; PROBLEM_CLASS &gt;::Save </td>
          <td>(</td>
          <td class="paramtype">PROBLEM_CLASS &amp;&#160;</td>
          <td class="paramname"><em>rSimulationToArchive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>rDirectory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classbool.html">bool</a>&#160;</td>
          <td class="paramname"><em>clearDirectory</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Archives a simulation in the directory specified.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Must be called collectively, i.e. by all processes.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">rSimulationToArchive</td><td>object defining the simulation to archive </td></tr>
    <tr><td class="paramname">rDirectory</td><td>directory where the multiple files defining the checkpoint will be stored (relative to CHASTE_TEST_OUTPUT) </td></tr>
    <tr><td class="paramname">clearDirectory</td><td>whether the directory needs to be cleared or not. </td></tr>
  </table>
  </dd>
</dl>

<p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000029">Todo:</a></b></dt><dd>#1026 get a real version number! </dd></dl>
</p>

<p>Definition at line <a class="el" href="CardiacSimulationArchiver_8cpp_source.html#l00074">74</a> of file <a class="el" href="CardiacSimulationArchiver_8cpp_source.html">CardiacSimulationArchiver.cpp</a>.</p>

<p>References <a class="el" href="PetscTools_8cpp_source.html#l00105">PetscTools::AmMaster()</a>, <a class="el" href="PetscTools_8cpp_source.html#l00119">PetscTools::Barrier()</a>, <a class="el" href="FileFinder_8hpp_source.html#l00056">RelativeTo::ChasteTestOutput</a>, <a class="el" href="Exception_8hpp_source.html#l00143">EXCEPTION</a>, <a class="el" href="ArchiveOpener_8hpp_source.html#l00098">ArchiveOpener&lt; Archive, Stream &gt;::GetCommonArchive()</a>, <a class="el" href="PetscTools_8cpp_source.html#l00093">PetscTools::GetNumProcs()</a>, <a class="el" href="OutputFileHandler_8cpp_source.html#l00214">OutputFileHandler::GetOutputDirectoryFullPath()</a>, and <a class="el" href="PetscTools_8cpp_source.html#l00158">PetscTools::ReplicateBool()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>heart/src/problem/<a class="el" href="CardiacSimulationArchiver_8hpp_source.html">CardiacSimulationArchiver.hpp</a></li>
<li>heart/src/problem/<a class="el" href="CardiacSimulationArchiver_8cpp_source.html">CardiacSimulationArchiver.cpp</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="classCardiacSimulationArchiver.html">CardiacSimulationArchiver</a>      </li>
      <li class="footer">Generated on Mon Nov 5 2012 12:47:35 for Chaste by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
