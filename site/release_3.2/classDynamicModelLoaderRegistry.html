<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Chaste: DynamicModelLoaderRegistry Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.2 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>DynamicModelLoaderRegistry Class Reference</h1><!-- doxytag: class="DynamicModelLoaderRegistry" --><!-- doxytag: inherits="boost::noncopyable" -->
<p><code>#include &lt;<a class="el" href="DynamicModelLoaderRegistry_8hpp_source.html">DynamicModelLoaderRegistry.hpp</a>&gt;</code></p>

<p>Inherits <a class="el" href="classboost_1_1noncopyable.html">boost::noncopyable</a>.</p>
<div class="dynheader">
Collaboration diagram for DynamicModelLoaderRegistry:</div>
<div class="dynsection">
<div class="center"><img src="classDynamicModelLoaderRegistry__coll__graph.png" border="0" usemap="#DynamicModelLoaderRegistry_coll__map" alt="Collaboration graph"/></div>
<map name="DynamicModelLoaderRegistry_coll__map" id="DynamicModelLoaderRegistry_coll__map">
<area shape="rect" id="node2" href="classboost_1_1noncopyable.html" title="{boost::noncopyable\n||}" alt="" coords="5,6,144,95"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classDynamicModelLoaderRegistry-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DynamicCellModelLoaderPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDynamicModelLoaderRegistry.html#a2a28d1fcb10dc1ccf173d2a699799f73">GetLoader</a> (const std::string &amp;rPath)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DynamicCellModelLoaderPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDynamicModelLoaderRegistry.html#acb1ca1067c53449802ed37418cd9ef4f">GetLoader</a> (const <a class="el" href="classFileFinder.html">FileFinder</a> &amp;rFileFinder)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDynamicModelLoaderRegistry.html#af2c5485be57c367744cd1cf439baf949">ScheduleForDeletion</a> (DynamicCellModelLoaderPtr pLoader)</td></tr>
<tr><td colspan="2"><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classDynamicModelLoaderRegistry.html">DynamicModelLoaderRegistry</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDynamicModelLoaderRegistry.html#aed4ac18cd2828be37d8f93f5e9b941fd">Instance</a> ()</td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDynamicModelLoaderRegistry.html#a6400ac7e1e233791c8cb80ec75aeebe7">DynamicModelLoaderRegistry</a> ()</td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <br class="typebreak"/>
DynamicCellModelLoaderWeakPtr &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDynamicModelLoaderRegistry.html#a5351842694c196d1820373c13150c354">mLoaders</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::set<br class="typebreak"/>
&lt; DynamicCellModelLoaderPtr &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDynamicModelLoaderRegistry.html#a8c51ab8c60e5db656ca3e6afc62bf534">mDeletableLoaders</a></td></tr>
<tr><td colspan="2"><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static std::auto_ptr<br class="typebreak"/>
&lt; <a class="el" href="classDynamicModelLoaderRegistry.html">DynamicModelLoaderRegistry</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDynamicModelLoaderRegistry.html#a0e1e0686c8e39494e6db6b06ffcefefa">mpInstance</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This class provides a static registry to keep track of the cell model loaders used, hence ensuring that we don't have a given .so loaded more than once at any given point. </p>

<p>Definition at line <a class="el" href="DynamicModelLoaderRegistry_8hpp_source.html#l00054">54</a> of file <a class="el" href="DynamicModelLoaderRegistry_8hpp_source.html">DynamicModelLoaderRegistry.hpp</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a6400ac7e1e233791c8cb80ec75aeebe7"></a><!-- doxytag: member="DynamicModelLoaderRegistry::DynamicModelLoaderRegistry" ref="a6400ac7e1e233791c8cb80ec75aeebe7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DynamicModelLoaderRegistry::DynamicModelLoaderRegistry </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Private constructor; all access should be via <a class="el" href="classDynamicModelLoaderRegistry.html#aed4ac18cd2828be37d8f93f5e9b941fd">Instance()</a>. </p>

<p>Definition at line <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html#l00081">81</a> of file <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html">DynamicModelLoaderRegistry.cpp</a>.</p>

<p>Referenced by <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html#l00039">Instance()</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="acb1ca1067c53449802ed37418cd9ef4f"></a><!-- doxytag: member="DynamicModelLoaderRegistry::GetLoader" ref="acb1ca1067c53449802ed37418cd9ef4f" args="(const FileFinder &amp;rFileFinder)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DynamicCellModelLoaderPtr DynamicModelLoaderRegistry::GetLoader </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFileFinder.html">FileFinder</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>rFileFinder</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the loader for the given .so file. </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rFileFinder</em>&nbsp;</td><td>finder for the .so file </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html#l00071">71</a> of file <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html">DynamicModelLoaderRegistry.cpp</a>.</p>

<p>References <a class="el" href="FileFinder_8cpp_source.html#l00217">FileFinder::GetAbsolutePath()</a>, and <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html#l00048">GetLoader()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a28d1fcb10dc1ccf173d2a699799f73"></a><!-- doxytag: member="DynamicModelLoaderRegistry::GetLoader" ref="a2a28d1fcb10dc1ccf173d2a699799f73" args="(const std::string &amp;rPath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DynamicCellModelLoaderPtr DynamicModelLoaderRegistry::GetLoader </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>rPath</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the loader for the given .so file. </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rPath</em>&nbsp;</td><td>absolute path to the .so </td></tr>
  </table>
  </dd>
</dl>

<p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000007">Todo:</a></b></dt><dd>#1957 causes segfaults </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000008">Todo:</a></b></dt><dd>#1957 remove when unloading working </dd></dl>
</p>

<p>Definition at line <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html#l00048">48</a> of file <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html">DynamicModelLoaderRegistry.cpp</a>.</p>

<p>References <a class="el" href="DynamicCellModelLoader_8cpp_source.html#l00044">DynamicCellModelLoader::Create()</a>, <a class="el" href="DynamicModelLoaderRegistry_8hpp_source.html#l00088">mLoaders</a>, and <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html#l00076">ScheduleForDeletion()</a>.</p>

<p>Referenced by <a class="el" href="CellMLToSharedLibraryConverter_8cpp_source.html#l00077">CellMLToSharedLibraryConverter::Convert()</a>, <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html#l00071">GetLoader()</a>, and <a class="el" href="AbstractCardiacTissue_8hpp_source.html#l00562">AbstractCardiacTissue&lt; SPACE_DIM &gt;::LoadCardiacCells()</a>.</p>

</div>
</div>
<a class="anchor" id="aed4ac18cd2828be37d8f93f5e9b941fd"></a><!-- doxytag: member="DynamicModelLoaderRegistry::Instance" ref="aed4ac18cd2828be37d8f93f5e9b941fd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDynamicModelLoaderRegistry.html">DynamicModelLoaderRegistry</a> * DynamicModelLoaderRegistry::Instance </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the single instance of the registry. </dd></dl>

<p>Definition at line <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html#l00039">39</a> of file <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html">DynamicModelLoaderRegistry.cpp</a>.</p>

<p>References <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html#l00081">DynamicModelLoaderRegistry()</a>, and <a class="el" href="DynamicModelLoaderRegistry_8hpp_source.html#l00094">mpInstance</a>.</p>

<p>Referenced by <a class="el" href="CellMLToSharedLibraryConverter_8cpp_source.html#l00077">CellMLToSharedLibraryConverter::Convert()</a>, <a class="el" href="AbstractDynamicallyLoadableEntity_8hpp_source.html#l00091">AbstractDynamicallyLoadableEntity::load()</a>, <a class="el" href="AbstractCardiacTissue_8hpp_source.html#l00562">AbstractCardiacTissue&lt; SPACE_DIM &gt;::LoadCardiacCells()</a>, and <a class="el" href="AbstractDynamicallyLoadableEntity_8cpp_source.html#l00050">AbstractDynamicallyLoadableEntity::~AbstractDynamicallyLoadableEntity()</a>.</p>

</div>
</div>
<a class="anchor" id="af2c5485be57c367744cd1cf439baf949"></a><!-- doxytag: member="DynamicModelLoaderRegistry::ScheduleForDeletion" ref="af2c5485be57c367744cd1cf439baf949" args="(DynamicCellModelLoaderPtr pLoader)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DynamicModelLoaderRegistry::ScheduleForDeletion </td>
          <td>(</td>
          <td class="paramtype">DynamicCellModelLoaderPtr&nbsp;</td>
          <td class="paramname"> <em>pLoader</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Schedule the given loader for deletion prior to loading any new .so.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pLoader</em>&nbsp;</td><td>the loader to schedule for deletion </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html#l00076">76</a> of file <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html">DynamicModelLoaderRegistry.cpp</a>.</p>

<p>References <a class="el" href="DynamicModelLoaderRegistry_8hpp_source.html#l00091">mDeletableLoaders</a>.</p>

<p>Referenced by <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html#l00048">GetLoader()</a>, and <a class="el" href="AbstractDynamicallyLoadableEntity_8cpp_source.html#l00050">AbstractDynamicallyLoadableEntity::~AbstractDynamicallyLoadableEntity()</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a8c51ab8c60e5db656ca3e6afc62bf534"></a><!-- doxytag: member="DynamicModelLoaderRegistry::mDeletableLoaders" ref="a8c51ab8c60e5db656ca3e6afc62bf534" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;DynamicCellModelLoaderPtr&gt; <a class="el" href="classDynamicModelLoaderRegistry.html#a8c51ab8c60e5db656ca3e6afc62bf534">DynamicModelLoaderRegistry::mDeletableLoaders</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loaders to be deleted before creating any new ones. </p>

<p>Definition at line <a class="el" href="DynamicModelLoaderRegistry_8hpp_source.html#l00091">91</a> of file <a class="el" href="DynamicModelLoaderRegistry_8hpp_source.html">DynamicModelLoaderRegistry.hpp</a>.</p>

<p>Referenced by <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html#l00076">ScheduleForDeletion()</a>.</p>

</div>
</div>
<a class="anchor" id="a5351842694c196d1820373c13150c354"></a><!-- doxytag: member="DynamicModelLoaderRegistry::mLoaders" ref="a5351842694c196d1820373c13150c354" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, DynamicCellModelLoaderWeakPtr&gt; <a class="el" href="classDynamicModelLoaderRegistry.html#a5351842694c196d1820373c13150c354">DynamicModelLoaderRegistry::mLoaders</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Loaders for shared-library cell models. Weak pointers are used so that the registry doesn't keep loaders alive when all cells created from them have been destroyed. Map is from absolute path of the library, to loader object. </p>

<p>Definition at line <a class="el" href="DynamicModelLoaderRegistry_8hpp_source.html#l00088">88</a> of file <a class="el" href="DynamicModelLoaderRegistry_8hpp_source.html">DynamicModelLoaderRegistry.hpp</a>.</p>

<p>Referenced by <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html#l00048">GetLoader()</a>.</p>

</div>
</div>
<a class="anchor" id="a0e1e0686c8e39494e6db6b06ffcefefa"></a><!-- doxytag: member="DynamicModelLoaderRegistry::mpInstance" ref="a0e1e0686c8e39494e6db6b06ffcefefa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::auto_ptr&lt; <a class="el" href="classDynamicModelLoaderRegistry.html">DynamicModelLoaderRegistry</a> &gt; <a class="el" href="classDynamicModelLoaderRegistry.html#a0e1e0686c8e39494e6db6b06ffcefefa">DynamicModelLoaderRegistry::mpInstance</a><code> [static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The single instance of this class.</p>
<p>The loader registry instance </p>

<p>Definition at line <a class="el" href="DynamicModelLoaderRegistry_8hpp_source.html#l00094">94</a> of file <a class="el" href="DynamicModelLoaderRegistry_8hpp_source.html">DynamicModelLoaderRegistry.hpp</a>.</p>

<p>Referenced by <a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html#l00039">Instance()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>heart/src/odes/<a class="el" href="DynamicModelLoaderRegistry_8hpp_source.html">DynamicModelLoaderRegistry.hpp</a></li>
<li>heart/src/odes/<a class="el" href="DynamicModelLoaderRegistry_8cpp_source.html">DynamicModelLoaderRegistry.cpp</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
