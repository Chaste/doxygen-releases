<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Chaste: CardiacSimulationArchiver&lt; PROBLEM_CLASS &gt; Class Template Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>CardiacSimulationArchiver&lt; PROBLEM_CLASS &gt; Class Template Reference</h1><!-- doxytag: class="CardiacSimulationArchiver" --><code>#include &lt;<a class="el" href="CardiacSimulationArchiver_8hpp-source.html">CardiacSimulationArchiver.hpp</a>&gt;</code>
<p>

<p>
<a href="classCardiacSimulationArchiver-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCardiacSimulationArchiver.html#f02c88ef857037f9bf109402604fac26">Save</a> (PROBLEM_CLASS &amp;simulationToArchive, const std::string &amp;rDirectory, bool clearDirectory=true)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static PROBLEM_CLASS *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCardiacSimulationArchiver.html#31ca0240091870257e172dab38fa8b7b">Load</a> (const std::string &amp;rDirectory)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static PROBLEM_CLASS *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCardiacSimulationArchiver.html#0c3cd0de7b3d15b0c36256718ddfa283">Load</a> (const <a class="el" href="classFileFinder.html">FileFinder</a> &amp;rDirectory)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static PROBLEM_CLASS *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCardiacSimulationArchiver.html#1b304bbf44b2adf6e99c429257911d49">Migrate</a> (const <a class="el" href="classFileFinder.html">FileFinder</a> &amp;rDirectory)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;class PROBLEM_CLASS&gt;<br>
 class CardiacSimulationArchiver&lt; PROBLEM_CLASS &gt;</h3>

<a class="el" href="classCardiacSimulationArchiver.html">CardiacSimulationArchiver</a> is a helper class for checkpointing of cardiac simulations.<p>
The class is templated over the class defining the simulation (i.e. <a class="el" href="classMonodomainProblem.html">MonodomainProblem</a>) 
<p>Definition at line <a class="el" href="CardiacSimulationArchiver_8hpp-source.html#l00052">52</a> of file <a class="el" href="CardiacSimulationArchiver_8hpp-source.html">CardiacSimulationArchiver.hpp</a>.</p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="f02c88ef857037f9bf109402604fac26"></a><!-- doxytag: member="CardiacSimulationArchiver::Save" ref="f02c88ef857037f9bf109402604fac26" args="(PROBLEM_CLASS &amp;simulationToArchive, const std::string &amp;rDirectory, bool clearDirectory=true)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class PROBLEM_CLASS&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classCardiacSimulationArchiver.html">CardiacSimulationArchiver</a>&lt; PROBLEM_CLASS &gt;::Save           </td>
          <td>(</td>
          <td class="paramtype">PROBLEM_CLASS &amp;&nbsp;</td>
          <td class="paramname"> <em>simulationToArchive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>rDirectory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>clearDirectory</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Archives a simulation in the directory specified.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Must be called collectively, i.e. by all processes.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>simulationToArchive</em>&nbsp;</td><td>object defining the simulation to archive </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rDirectory</em>&nbsp;</td><td>directory where the multiple files defining the checkpoint will be stored (relative to CHASTE_TEST_OUTPUT) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clearDirectory</em>&nbsp;</td><td>whether the directory needs to be cleared or not. </td></tr>
  </table>
</dl>

<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000026">Todo:</a></b></dt><dd>#1026 get a real version number! </dd></dl>

<p>Definition at line <a class="el" href="CardiacSimulationArchiver_8hpp-source.html#l00114">114</a> of file <a class="el" href="CardiacSimulationArchiver_8hpp-source.html">CardiacSimulationArchiver.hpp</a>.</p>

<p>References <a class="el" href="PetscTools_8cpp-source.html#l00100">PetscTools::AmMaster()</a>, <a class="el" href="PetscTools_8cpp-source.html#l00116">PetscTools::Barrier()</a>, <a class="el" href="FileFinder_8hpp-source.html#l00047">RelativeTo::ChasteTestOutput</a>, <a class="el" href="Exception_8hpp-source.html#l00116">EXCEPTION</a>, <a class="el" href="ArchiveOpener_8hpp-source.html#l00090">ArchiveOpener&lt; Archive, Stream &gt;::GetCommonArchive()</a>, <a class="el" href="PetscTools_8cpp-source.html#l00088">PetscTools::GetNumProcs()</a>, <a class="el" href="OutputFileHandler_8cpp-source.html#l00154">OutputFileHandler::GetOutputDirectoryFullPath()</a>, and <a class="el" href="PetscTools_8cpp-source.html#l00133">PetscTools::ReplicateBool()</a>.</p>

<p>Referenced by <a class="el" href="CardiacSimulation_8hpp-source.html#l00097">CardiacSimulation::CreateAndRun()</a>.</p>

</div>
</div><p>
<a class="anchor" name="31ca0240091870257e172dab38fa8b7b"></a><!-- doxytag: member="CardiacSimulationArchiver::Load" ref="31ca0240091870257e172dab38fa8b7b" args="(const std::string &amp;rDirectory)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class PROBLEM_CLASS&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">PROBLEM_CLASS * <a class="el" href="classCardiacSimulationArchiver.html">CardiacSimulationArchiver</a>&lt; PROBLEM_CLASS &gt;::Load           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>rDirectory</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Unarchives a simulation from the directory specified.<p>
Does a migrate if necessary (this is actually just a wrapper around the Migrate method now).<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Must be called collectively, i.e. by all processes.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rDirectory</em>&nbsp;</td><td>directory where the multiple files defining the checkpoint are located (relative to CHASTE_TEST_OUTPUT) </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="CardiacSimulationArchiver_8hpp-source.html#l00162">162</a> of file <a class="el" href="CardiacSimulationArchiver_8hpp-source.html">CardiacSimulationArchiver.hpp</a>.</p>

<p>References <a class="el" href="FileFinder_8hpp-source.html#l00047">RelativeTo::ChasteTestOutput</a>, and <a class="el" href="CardiacSimulationArchiver_8hpp-source.html#l00176">CardiacSimulationArchiver&lt; PROBLEM_CLASS &gt;::Migrate()</a>.</p>

</div>
</div><p>
<a class="anchor" name="0c3cd0de7b3d15b0c36256718ddfa283"></a><!-- doxytag: member="CardiacSimulationArchiver::Load" ref="0c3cd0de7b3d15b0c36256718ddfa283" args="(const FileFinder &amp;rDirectory)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class PROBLEM_CLASS&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">PROBLEM_CLASS * <a class="el" href="classCardiacSimulationArchiver.html">CardiacSimulationArchiver</a>&lt; PROBLEM_CLASS &gt;::Load           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFileFinder.html">FileFinder</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>rDirectory</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Unarchives a simulation from the directory specified.<p>
Does a migrate if necessary (this is actually just a wrapper around the Migrate method now).<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Must be called collectively, i.e. by all processes.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rDirectory</em>&nbsp;</td><td>directory where the multiple files defining the checkpoint are located </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="CardiacSimulationArchiver_8hpp-source.html#l00169">169</a> of file <a class="el" href="CardiacSimulationArchiver_8hpp-source.html">CardiacSimulationArchiver.hpp</a>.</p>

<p>References <a class="el" href="CardiacSimulationArchiver_8hpp-source.html#l00176">CardiacSimulationArchiver&lt; PROBLEM_CLASS &gt;::Migrate()</a>.</p>

</div>
</div><p>
<a class="anchor" name="1b304bbf44b2adf6e99c429257911d49"></a><!-- doxytag: member="CardiacSimulationArchiver::Migrate" ref="1b304bbf44b2adf6e99c429257911d49" args="(const FileFinder &amp;rDirectory)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class PROBLEM_CLASS&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">PROBLEM_CLASS * <a class="el" href="classCardiacSimulationArchiver.html">CardiacSimulationArchiver</a>&lt; PROBLEM_CLASS &gt;::Migrate           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFileFinder.html">FileFinder</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>rDirectory</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Load a simulation, saved by any number of processes, into the correct number of processes for those currently launched.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>Must be called collectively, i.e. by all processes.</dd></dl>
Uses the <a class="el" href="classDistributedVectorFactory.html">DistributedVectorFactory</a> saved in the process 0 archive to work out how many secondary archive files to read, and loads the cells and boundary conditions from these too.<p>
Uses a dumb partition to work out how to distribute the mesh and cells over the processes. If we are loading on the same number of processes as the simulation was saved on, it uses exactly the same distribution as before.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rDirectory</em>&nbsp;</td><td>directory where the multiple files defining the checkpoint are located </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="CardiacSimulationArchiver_8hpp-source.html#l00176">176</a> of file <a class="el" href="CardiacSimulationArchiver_8hpp-source.html">CardiacSimulationArchiver.hpp</a>.</p>

<p>References <a class="el" href="Exception_8hpp-source.html#l00116">EXCEPTION</a>, <a class="el" href="FileFinder_8cpp-source.html#l00111">FileFinder::Exists()</a>, <a class="el" href="FileFinder_8cpp-source.html#l00152">FileFinder::GetAbsolutePath()</a>, <a class="el" href="ArchiveOpener_8hpp-source.html#l00090">ArchiveOpener&lt; Archive, Stream &gt;::GetCommonArchive()</a>, <a class="el" href="DistributedVectorFactory_8hpp-source.html#l00207">DistributedVectorFactory::GetNumProcs()</a>, <a class="el" href="PetscTools_8cpp-source.html#l00088">PetscTools::GetNumProcs()</a>, <a class="el" href="DistributedVectorFactory_8hpp-source.html#l00238">DistributedVectorFactory::GetOriginalFactory()</a>, <a class="el" href="ArchiveLocationInfo_8cpp-source.html#l00086">ArchiveLocationInfo::GetProcessUniqueFilePath()</a>, <a class="el" href="FileFinder_8cpp-source.html#l00135">FileFinder::IsDir()</a>, <a class="el" href="PetscTools_8hpp-source.html#l00291">NEVER_REACHED</a>, and <a class="el" href="DistributedVectorFactory_8hpp-source.html#l00218">DistributedVectorFactory::SetCheckNumberOfProcessesOnLoad()</a>.</p>

<p>Referenced by <a class="el" href="CardiacSimulationArchiver_8hpp-source.html#l00162">CardiacSimulationArchiver&lt; PROBLEM_CLASS &gt;::Load()</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>heart/src/problem/<a class="el" href="CardiacSimulationArchiver_8hpp-source.html">CardiacSimulationArchiver.hpp</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Nov 1 12:36:17 2010 for Chaste by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
